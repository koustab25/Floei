<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Late Period | Floei</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --blush-pink: #FFB7C5;
            --deep-pink: #FF6B8B;
            --rose-gold: #E0BFB8;
            --soft-white: #FFF9FB;
            --dark-pink: #D23C77;
            --text-color: #5A3D4D;
            --light-pink: #FFE5EB;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--soft-white);
            margin: 0;
            padding: 0;
            color: var(--text-color);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            background-image: radial-gradient(circle at 20% 80%, rgba(255,183,197,0.1) 0%, transparent 20%),
                            radial-gradient(circle at 80% 20%, rgba(255,107,139,0.1) 0%, transparent 20%);
        }
        
        .container {
            max-width: 600px;
            margin: auto;
            padding: 2rem;
            text-align: center;
            position: relative;
            z-index: 1;
        }
        
        .header {
            margin-bottom: 2rem;
            position: relative;
        }
        
        .logo {
            width: 100px;
            margin: 20px auto;
            display: block;
            margin-bottom: -50px;
        }
        
        h1 {
            font-family: 'Playfair Display', serif;
            font-weight: 700;
            font-size: 2.5rem;
            color: var(--dark-pink);
            margin-bottom: 0.5rem;
            line-height: 1.2;
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 2rem;
            font-weight: 400;
        }
        
        /* Status Card */
        .status-card {
            background: rgb(255, 255, 255);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 10px 30px rgba(255, 183, 197, 0.2);
            position: relative;
            overflow: hidden;
            border: 1px solid var(--light-pink);
        }
        
        .status-card::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 8px;
            background: linear-gradient(90deg, var(--deep-pink), var(--rose-gold));
        }
        
        /* Circular Progress Animation */
        .progress-container {
            width: 230px;
            height: 220px;
            margin: 2rem auto;
            position: relative;
        }
        
        .progress-circle {
            width: 100%;
            height: 100%;
            transform: rotate(-90deg);
        }
        
        .progress-bg {
            fill: none;
            stroke: var(--blush-pink);
            stroke-width: 8;
        }
        
        .progress-fill {
            fill: none;
            stroke: var(--deep-pink);
            stroke-width: 8;
            stroke-linecap: round;
            stroke-dasharray: 628;
            stroke-dashoffset: 628;
            animation: progressAnimation 2s ease-out forwards;
            transform-origin: center;
        }
        
        @keyframes progressAnimation {
            to {
                stroke-dashoffset: var(--dash-offset);
            }
        }
        
        .progress-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }
        
        .late-count {
            font-size: 3.5rem;
            font-weight: 600;
            color: var(--dark-pink);
            margin-bottom: 0.5rem;
            font-family: 'Playfair Display', serif;
        }
        
        .late-label {
            font-size: 1.2rem;
            font-weight: 500;
            color: var(--deep-pink);
        }
        
        .status-message {
            font-size: 1.1rem;
            margin: 1.5rem 0;
            padding: 1rem;
            background-color: var(--light-pink);
            border-radius: 12px;
            border-left: 4px solid var(--dark-pink);
        }
        
        /* Action Buttons */
        .action-buttons {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            justify-content: center;
            margin: 2rem 0;
        }
        
        .btn {
            padding: 1rem 2rem;
            border-radius: 50px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.7rem;
            font-size: 1.1rem;
            border: none;
            min-width: 220px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--deep-pink), var(--dark-pink));
            color: white;
            box-shadow: 0 4px 20px rgba(210, 60, 119, 0.3);
        }
        
        .btn-secondary {
            background: white;
            color: var(--dark-pink);
            border: 1px solid var(--blush-pink);
            box-shadow: 0 2px 15px rgba(255, 183, 197, 0.3);
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(210, 60, 119, 0.4);
        }
        
        .btn:active {
            transform: translateY(1px);
        }
        
        /* Information Sections */
        .info-section {
            background: white;
            border-radius: 20px;
            padding: 1.8rem;
            margin: 1.5rem 0;
            box-shadow: 0 5px 25px rgba(255, 183, 197, 0.15);
            text-align: left;
            border: 1px solid var(--light-pink);
        }
        
        .section-title {
            font-family: 'Playfair Display', serif;
            color: var(--dark-pink);
            margin-bottom: 1.2rem;
            display: flex;
            align-items: center;
            gap: 0.8rem;
            font-size: 1.5rem;
            font-weight: 600;
        }
        
        .section-title i {
            color: var(--deep-pink);
        }
        
        .tips-list {
            padding-left: 0;
        }
        
        .tips-list li {
            margin-bottom: 1rem;
            position: relative;
            list-style-type: none;
            padding-left: 2rem;
            line-height: 1.6;
        }
        
        .tips-list li:before {
            content: "•";
            color: var(--deep-pink);
            font-size: 2rem;
            position: absolute;
            left: 0;
            top: -0.5rem;
        }
        
        /* Reasons Grid */
        .reasons-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }
        
        .reason-card {
            background: var(--light-pink);
            border-radius: 15px;
            padding: 1.5rem;
            text-align: center;
            transition: transform 0.3s ease;
        }
        
        .reason-card:hover {
            transform: translateY(-5px);
        }
        
        .reason-icon {
            font-size: 2rem;
            color: var(--dark-pink);
            margin-bottom: 1rem;
        }
        
        .reason-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--dark-pink);
        }
        
        /* Symptom Tracker */
        .symptom-tracker {
            margin-top: 1.5rem;
        }
        
        .symptom-options {
            display: flex;
            flex-wrap: wrap;
            gap: 0.8rem;
            justify-content: center;
            margin-top: 1rem;
        }
        
        .symptom-option {
            background: white;
            border: 1px solid var(--blush-pink);
            border-radius: 50px;
            padding: 0.6rem 1.2rem;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .symptom-option:hover, .symptom-option.active {
            background: var(--deep-pink);
            color: white;
            border-color: var(--deep-pink);
        }
        
        /* Floral decorations */
        .floral-decor {
            position: absolute;
            opacity: 0.15;
            z-index: 0;
            color: var(--deep-pink);
        }
        
        .floral-1 {
            top: 10%;
            left: 5%;
            font-size: 4rem;
            transform: rotate(-15deg);
        }
        
        .floral-2 {
            bottom: 15%;
            right: 5%;
            font-size: 4rem;
            transform: rotate(25deg);
        }
        
        .floral-3 {
            top: 30%;
            right: 8%;
            font-size: 3rem;
            transform: rotate(10deg);
        }
        
        .floral-4 {
            bottom: 25%;
            left: 8%;
            font-size: 2.5rem;
            transform: rotate(-20deg);
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 1.5rem;
            }
            
            h1 {
                font-size: 1.5rem;
            }
            
            .progress-container {
                width: 200px;
                height: 200px;
            }
            
            .late-count {
                font-size: 3rem;
            }
            
            .reasons-grid {
                grid-template-columns: 1fr;
            }
            
            .btn {
                width: 100%;
            }
        }
        
        /* Animation */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .animated-section {
            animation: fadeIn 0.6s ease-out forwards;
        }
        
        .delay-1 { animation-delay: 0.2s; }
        .delay-2 { animation-delay: 0.4s; }
        .delay-3 { animation-delay: 0.6s; }
    </style>
</head>
<body>
    <img src="assets/logo/logoMainPink-Photoroom.png" alt="Floei Logo" class="logo">
    <div class="container">
        <!-- Floral decorations -->
        <i class="floral-decor floral-1 fas fa-spa"></i>
        <i class="floral-decor floral-2 fas fa-spa"></i>
        <i class="floral-decor floral-3 fas fa-leaf"></i>
        <i class="floral-decor floral-4 fas fa-heart"></i>
        
        <div class="header animated-section">
            <h1>Your Cycle Update</h1>
            <p class="subtitle">We noticed your period is running late</p>
        </div>
        
        <!-- Status Card -->
        <div class="status-card animated-section delay-1">
            <div class="progress-container">
                <svg class="progress-circle" viewBox="0 0 220 220">
                    <circle class="progress-bg" cx="110" cy="110" r="100"></circle>
                    <circle class="progress-fill" cx="110" cy="110" r="100"></circle>
                </svg>
                <div class="progress-content">
                    <div class="late-count" id="daysLate">0</div>
                    <div class="late-label">days late</div>
                </div>
            </div>
            
            <div class="status-message" id="statusMessage">
                <i class="fas fa-info-circle"></i> 
                <span id="dynamicMessage">Your personalized dashboard will update when you log your period</span>
            </div>
            
            <div class="action-buttons">
                <button class="btn btn-primary" id="logPeriodBtn">
                    <i class="fas fa-check-circle"></i> Log Period Start
                </button>
                <button class="btn btn-secondary" id="trackSymptomsBtn">
                    <i class="fas fa-clipboard-list"></i> Track Symptoms
                </button>
            </div>
        </div>
        
        <!-- Reasons Section -->
        <div class="info-section animated-section delay-2">
            <h3 class="section-title"><i class="fas fa-question-circle"></i> Possible Reasons</h3>
            <p>Many factors can affect your menstrual cycle. Here are some common reasons for a late period:</p>
            
            <div class="reasons-grid">
                <div class="reason-card">
                    <div class="reason-icon"><i class="fas fa-moon"></i></div>
                    <h4 class="reason-title">Stress</h4>
                    <p>High stress levels can disrupt your hormonal balance and delay ovulation</p>
                </div>
                <div class="reason-card">
                    <div class="reason-icon"><i class="fas fa-weight"></i></div>
                    <h4 class="reason-title">Weight Changes</h4>
                    <p>Significant weight loss or gain can affect your menstrual cycle</p>
                </div>
                <div class="reason-card">
                    <div class="reason-icon"><i class="fas fa-dumbbell"></i></div>
                    <h4 class="reason-title">Exercise</h4>
                    <p>Excessive physical activity can sometimes cause missed periods</p>
                </div>
                <div class="reason-card">
                    <div class="reason-icon"><i class="fas fa-pills"></i></div>
                    <h4 class="reason-title">Medication</h4>
                    <p>Certain medications can affect your cycle timing</p>
                </div>
            </div>
        </div>
        
        <!-- Self-Care Tips -->
        <div class="info-section animated-section delay-2">
            <h3 class="section-title"><i class="fas fa-heart"></i> Self-Care Recommendations</h3>
            <ul class="tips-list">
                <li><strong>Relaxation techniques:</strong> Try meditation, deep breathing, or yoga to reduce stress that might be affecting your cycle</li>
                <li><strong>Nutrition:</strong> Ensure you're getting enough iron, vitamins, and healthy fats to support hormonal balance</li>
                <li><strong>Hydration:</strong> Drink plenty of water to help your body function optimally</li>
                <li><strong>Sleep:</strong> Aim for 7-9 hours of quality sleep to regulate hormones</li>
                <li><strong>Gentle exercise:</strong> Light activities like walking or swimming may help regulate your cycle</li>
                <li><strong>Tracking:</strong> Continue monitoring symptoms to identify patterns</li>
            </ul>
        </div>
        
        <!-- Symptom Tracker -->
        <div class="info-section animated-section delay-3" id="symptomSection" style="display: none;">
            <h3 class="section-title"><i class="fas fa-clipboard-check"></i> Track Your Symptoms</h3>
            <p>Are you experiencing any of these common premenstrual symptoms?</p>
            
            <div class="symptom-tracker">
                <div class="symptom-options">
                    <div class="symptom-option">Bloating</div>
                    <div class="symptom-option">Cramps</div>
                    <div class="symptom-option">Headache</div>
                    <div class="symptom-option">Fatigue</div>
                    <div class="symptom-option">Mood swings</div>
                    <div class="symptom-option">Breast tenderness</div>
                    <div class="symptom-option">Food cravings</div>
                    <div class="symptom-option">Acne</div>
                </div>
                
                <div class="action-buttons" style="margin-top: 2rem;">
                    <button class="btn btn-primary" id="saveSymptomsBtn">
                        <i class="fas fa-save"></i> Save Symptoms
                    </button>
                </div>
            </div>
        </div>
        
        <!-- When to See a Doctor -->
        <div class="info-section animated-section delay-3">
            <h3 class="section-title"><i class="fas fa-user-md"></i> When to Consult a Doctor</h3>
            <ul class="tips-list">
                <li>If your period is more than 2 weeks late without explanation</li>
                <li>If you experience severe pain or unusual symptoms</li>
                <li>If you've missed 3 or more periods in a row</li>
                <li>If you suspect you might be pregnant</li>
                <li>If you have other concerning health changes</li>
            </ul>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Calculate days late
            const profile = JSON.parse(localStorage.getItem('userProfile')) || {};
            const logs = JSON.parse(localStorage.getItem('periodLogs')) || [];
            let daysLate = 0;
            
            if (logs.length > 0) {
                const lastPeriod = logs[logs.length - 1];
                const lastStart = new Date(lastPeriod.startDate);
                const today = new Date();
                
                const cycleLength = profile.cycleLength || 28;
                const expectedNext = new Date(lastStart);
                expectedNext.setDate(lastStart.getDate() + cycleLength);
                
                daysLate = Math.max(0, Math.floor((today - expectedNext) / (1000 * 60 * 60 * 24)));
            } else {
                daysLate = 0;
            }
            
            // Update display
            document.getElementById('daysLate').textContent = daysLate;
            
            // Set dynamic message based on days late
            const statusMessage = document.getElementById('dynamicMessage');
            if (daysLate === 0) {
                statusMessage.textContent = "Your period is due today. Tracking helps us provide better predictions.";
            } else if (daysLate <= 3) {
                statusMessage.textContent = "A slight variation is normal. Your body might just need more time.";
            } else if (daysLate <= 7) {
                statusMessage.textContent = "Consider possible reasons for the delay. Your cycle might adjust soon.";
            } else {
                statusMessage.textContent = "You may want to track symptoms or consider taking a pregnancy test if applicable.";
            }
            
            // Animate circle (more days = more filled circle)
            const progressFill = document.querySelector('.progress-fill');
            const maxLateDays = 14; // Max days to show on circle
            const percentage = Math.min(daysLate / maxLateDays, 1);
            const dashOffset = 628 * (1 - percentage); // 628 ≈ 2πr (for r=100)
            progressFill.style.setProperty('--dash-offset', dashOffset);

            // Button handlers
            document.getElementById('logPeriodBtn').addEventListener('click', function() {
                window.location.href = `log.html?start=${new Date().toISOString().split('T')[0]}`;
            });
            
            document.getElementById('trackSymptomsBtn').addEventListener('click', function() {
                document.getElementById('symptomSection').style.display = 'block';
                window.scrollTo({
                    top: document.getElementById('symptomSection').offsetTop - 20,
                    behavior: 'smooth'
                });
            });
            
            document.getElementById('saveSymptomsBtn').addEventListener('click', function() {
                alert('Symptoms saved successfully!');
                document.getElementById('symptomSection').style.display = 'none';
            });
            
            // Symptom option selection
            const symptomOptions = document.querySelectorAll('.symptom-option');
            symptomOptions.forEach(option => {
                option.addEventListener('click', function() {
                    this.classList.toggle('active');
                });
            });
            
            // Add animations to elements as they come into view
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('animated-section');
                    }
                });
            }, { threshold: 0.1 });
            
            document.querySelectorAll('.info-section').forEach(section => {
                observer.observe(section);
            });
        });
    </script>
</body>
</html>